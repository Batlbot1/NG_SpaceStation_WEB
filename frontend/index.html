<html>
    <head>
        <title>Welcome to Space Station</title>
    </head>
    <script>
        let socket = new WebSocket("ws://127.0.0.1:8081");
        
        socket.onopen = function(e) {
            alert("[open] Connection established");
        };

        socket.onmessage = function(event) {
            msg = event.data
            console.log(msg)
            pos = msg.split(/\s+/)
            document.getElementById("X").innerHTML = pos[0]
            document.getElementById("Y").innerHTML = pos[1]
        };

        socket.onclose = function(event) {
            if (event.wasClean) {
                alert(`[close] Connection closed cleanly, code=${event.code} reason=${event.reason}`);
            } else {
                alert('[close] Connection died');
            }
        };

        socket.onerror = function(error) {
            alert(`[error] ${error.message}`);
        };

        document.addEventListener('keyup', (e) => {
            if (e.code === "KeyW")          socket.send("MOVE W")
            else if (e.code === "KeyS")     socket.send("MOVE S")
            else if (e.code === "KeyA")     socket.send("MOVE A")
            else if (e.code === "KeyD")     socket.send("MOVE D")
        })

    </script>
    <body>
        X: <div id="X"></div>
        Y: <div id="Y"></div>
    </body>
</html>